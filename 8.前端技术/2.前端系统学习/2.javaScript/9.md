### 原型

> `Javascript `规定，每一个构造函数都有一个 `prototype` 属性，指向另一个对象。

##### 作用

> **数据共享**，节省内存空间

##### 案例

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>title</title>
  <script>
    function Person(name,age) {
      this.name=name;
      this.age=age;
    }
    //通过原型来添加方法,解决数据共享,节省内存空间
    Person.prototype.eat=function () {
      console.log("吃凉菜");
    };

    var p1=new Person("小明",20);
    var p2=new Person("小红",30);
    console.log(p1.eat==p2.eat);//true

    console.dir(p1);
    console.dir(p2);

    //实例对象中根本没有eat方法,但是能够使用,这是为什么?
  </script>
</head>
<body>
</body>
</html>
```

###### 通过原型的方式修改标签样式

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>title</title>
  <style>
    div {
      width: 300px;
      height: 200px;
      background-color: red;
    }
  </style>
</head>
<body>
<input type="button" value="显示效果" id="btn"/>
<div id="dv"></div>
<script src="common.js"></script>
<script>

  function ChangeStyle(btnObj, dvObj, json) {
    // this代指当前对象
    this.btnObj = btnObj;
    this.dvObj = dvObj;
    this.json = json;
  }
  ChangeStyle.prototype.init = function () {
    //点击按钮,改变div多个样式属性值
    // this代指当前对象
    var that = this;
    this.btnObj.onclick = function () {//按钮
        console.log(this)	// this：代指 this.btnObj
      for (var key in that.json) {
        that.dvObj.style[key] = that.json[key];
      }
    };
  };


  var json = {"width": "500px", "height": "800px", "backgroundColor": "blue", "opacity": "0.2"};
  var cs = new ChangeStyle(my$("btn"), my$("dv"), json);
  cs.init();//调用方法

  //点击p标签,设置div的样式


</script>

</body>
</html>
```

###### 简单原型的案例

> 需要手动修改构造器的指向

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>title</title>
  <script>
    function Student(name, age, sex) {
      this.name = name;
      this.age = age;
      this.sex = sex;
    }
    //简单的原型写法
    Student.prototype = {
      //手动修改构造器的指向
      constructor:Student,
      height: "188",
      weight: "55kg",
      study: function () {
        console.log("学习好开心啊");
      },
      eat: function () {
        console.log("我要吃好吃的");
      }
    };

    var stu=new Student("段飞",20,"男");
    stu.eat();
    stu.study();
    console.dir(Student);
    console.dir(stu);
      
  </script>
</head>
<body>


</body>
</html>
```

### 构造函数，原型，实例对象三者间的关系

##### 构造函数

> 构造函数中有一个属性叫**prototype**,是构造函数的**原型对象**
>
> > 构造函数的原型对象(prototype)中有一个**constructor**构造器,这个构造器指向的就是自己所在的原型对象所在的构造函数

##### 原型

> **实例对象**的原型对象(`__proto__`)指向的是该构造函数的原型对象

##### 实例对象

> **构造函数**的原型对象(**prototype**)中的方法是可以被实例对象直接访问的



### 实例对象属性方法的调用顺序

> 先在构造函数中找
>
> > 构造函数中没有，调用原型中的属性和方法、
> >
> > > 圆形中没有则报错



### 改变原型的指向

> 原型指向可以改变
> 实例对象的原型`__proto__`指向的是该对象所在的构造函数的原型对象构造函数的原型对象(prototype)指向如果改变了,实例对象的原型(`__proto__`)指向也会发生改变
>
> 原型的指向是可以改变的
> 实例对象和原型对象之间的关系是通过`__proto__`原型来联系起来的,这个关系就是原型链

```js
    //人的构造函数
    function Person(age) {
      this.age=10;
    }
    //人的原型对象方法
    Person.prototype.eat=function () {
      console.log("人的吃");
    };
    //学生的构造函数
    function Student() {

    }
    Student.prototype.sayHi=function () {
      console.log("嗨,小苏你好帅哦");
    };
    //学生的原型,指向了一个人的实例对象
    Student.prototype=new Person(10);
    var stu=new Student();
    stu.eat();
    stu.sayHi();
```



高级 第一天完毕

