## linux第二天笔记

-----

### 用户操作

#### 增加

###### useradd

> 增加用户

> -c	给账户一个表述信息
>
> -d	指定用户的家目录
>
> -g	指定用户的==主组==
>
> -G	指定用户的==附加组==
>
> -s	为用户指定shell程序
>
> -u	为用户指定它的uid

> 案例
>
> > 1.`useradd tedu`
> >
> > 2.`useradd -u 600 -d /root/tedu2 -m -G tedu,bin tedu2`
> >
> > > 命令可以执行成功，单无法识别自己的家目录
> >
> > 3.`useradd -s /bin/sb tedu3`
> >
> > >  系统中已存在的另一种shell程序（样式不同，权限一样）
> >
> > 4.`useradd -s /sbin/nologin tedu4`
> >
> > > 创建一个伪用户，维护系统某个某些程序而去设计的，不能登陆

#### 修改

###### usermod

> 修改用户

> -d	为用户指定家目录
>
> -g	指定用户主组
>
> -G	为用户指定附加组
>
> -aG	为用户追加附加组
>
> -s	为用户指定shell程序
>
> -u	为用户指定uid

> 案例
>
> > `usermod -l newUserName oldUserName`
> >
> > > 修改用户名

#### 删除

###### userdel

> 删除用户

> -r	删除用户的同时删除该用户的所有信息

#### 密码

###### passwd

> 为用户设置密码
>
> 管理员才能修改别人的密码
>
> 当用户没有密码时不能通过网络的方式登陆

> -l	表示锁定
>
> -u	表示解锁
>
> -d	删除密码



#### 用户身份切换

###### su

> 用户身份之间的切换

> `su - UserName`
>
> > 路径改变，变为该用户的家目录
>
> `su UserName`
>
> > 路径不发生变化





### 用户组

#### 创建

###### groupadd [选项] groupName

> -g	指定组GID
>
> -o	可以让组的GID和系统中已存在的GID相同，==会被认为是同一个用户组==

#### 修改

###### groupmod [选项] groupName

> 修改用户组的信息

> -g	指定组id
>
> -o	可以让组的GID和系统中已存在的GID相同
>
> -n	用来修改组的名称

#### 删除

###### groupdel groupName

> 删除用户组
>
> 如果组被用户当作主组使用时，该组不允许被删除
>
> 如果被当作附加组使用时，删除后，对应用户会被撤销组坐标

#### 用户切换组

###### newgrp groupName

> 前提条件是该用户必须是对应的组内成员才能切换



### 权限

#### 逻辑权限

> 一个文件夹会有三组
>
> > 用户	用户组	其他人
>
> 三组的权限是一样的
>
> > 读	写	执行

> 不管是什么文件，用`ls -l`方式去查询的时候最前面的就是表示该文件的权限

> `drwxr-xr-x`
>
> > 文件类型(d)	用户权限(rwx)	用户组权限(r-x)	其他人权限(r-x)

##### 修改权限

###### chmod [选项] 参数 

> 修改文件的权限

> -R	表示递归处理所有的文件

> 举例
>
> > `chmod u+x,g+x,o+x dirName`
> >
> > `chmod a+x dirName`
> >
> > `chmod +x dirName`
> >
> > `chmod 741 dirName`

#### 物理权限

##### 设置物理权限

###### chattr [-RVf] [-v version] [mode] file

> 用来锁定某个文件不能被修改
>
> 但不能修改保护 `/` `/dev` `/tmp` `/var`

> ==a	让文件或目录仅供附加用途；==
>
> ==i	不得任意更动文件或目录；==
>
> -R：递归处理，将指令目录下的所有文件及子目录一并处理；
>
> ==+<属性>	开启文件或目录的该项属性；==
>
> ==-<属性>	关闭文件或目录的该项属性；==

> 实例
>
> > 1.`chattr +i /etc/fstab`
> >
> > > 防止系统中的某个关键文件被修改
> >
> > `chattr -R +i /home`
> >
> > > 将home目录下的文件和目录设置为不允许任何人修改

##### 查看物理权限

###### lsattr [ -RVadv ] [ files… ]

> -R	递归显示目录下所有的子目录和文件的属性
>
> -a	显示所有文件的属性信息
>
> -d	显示目录的属性，不是目录下文件的属性



### 用户的root权限（详见sudo详解）

###### sudo

> 通过修改/etc/sudoers文件来加入某个账户的sudo权限

###### /etc/sudoers

> 文件解读，详细看老师笔记



### swap

> Swap分区在系统的物理内存(这里应该是运行内存)不够用的时候，把物理内存中的一部分空间释放出来，以供当前运行的程序使用。
>
> 那些被释放的空间可能来自一些很长时间没有什么操作的程序，这些被释放的空间被临时保存到Swap分区中



### 挂载

###### mount

> 文件要能够连接到目录树才能被我们使用
>
> 将文件系统和目录树结合的动作我们称之为挂载

> 案例
>
> > 1.`mkdir /home/cdrom_DIY`
> >
> > > 创建目录
> >
> > 2.`mount /dev/cdrom /home/cdrom_DIY`
> >
> > > 将光盘挂载到目录下

###### umount

> 取消挂载

> 案例
>
> > `umount /home/cdrom_DIY`



### 网络相关设备

#### 交换机

> 交换机可以组建局域网

#### 路由器

> 实现网络代理功能



### 网络地址相关

#### IP地址

> PC再网络中通信的地址

#### 子网掩码

> 用于区分网络号和主机号

#### 网关

> 网络的关口，用于数据转发，通常理解为路由器的地址

#### DNS

> 用于解析域名



### NAT和桥接的优缺点

#### NAT

> 优点
>
> > 可以无视物理主机的网络环境，通过VMNet8提供网络环境
>
> 缺点
>
> > 其他主机想要访问NAT模式下的虚拟机时比较麻烦

#### 桥接

> 类似于将物理主机虚拟为一台交换机，物理主机和虚拟设备都连接到交换机的一个接口上，虚拟机的设置要与物理主机一致

> 优点
>
> > 同一个局域网中任意一台物理主机只要有账号和密码就可以直接进行通信
>
> 缺点
>
> > 依赖于宿主主机的网络环境



#### 通过主机名查看IP

> `host www.baidu.com`



#### 远程拷贝

###### 从本机上传文件到服务器

> `scp [可选参数] file_source file_target `

> -r	该选项用于传输文件夹的时候使用

> 案例
>
> > 1.`scp /root/install.log root@192.168.89.128:/home`
> >
> > > 将本机的文件拷贝到远程服务器上

###### 从服务器拷贝文件到本机

> `scp {UserName}@Host_IP:/[path]/file  /[path]`

> 案例
>
> > `scp root@192.168.89.128:/home/install.log  /root`



### 登录远程服务器：

> ssh {UserName}@Host_IP
>
> > ssh服务默认的端口号是22，如果提供的端口不是22，那么就需要在访问的时候指定远程的端口

> 案例
>
> > 1.`ssh root@192.168.89.128`
> >
> > > ssh服务的端口为22时直接使用
>
> > 2.`ssh [-p port] {UserName}@Host_IP`
> >
> > > ssh服务的端口不是22时，需要手动指定端口号

