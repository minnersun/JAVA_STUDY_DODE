## 哨兵集群（sentinel）

---------

> 详见老师笔记，有图解

### 功能

> 监听管理一个主从结构

### 哨兵集群原理

> 监听
>
> > 通过心跳机制（rpc远程控制协议）判断直接顶啊的存活
>
> 过半投票
>
> > 主节点宕机，哨兵及群发器投票，票数过半执行后续逻辑



### 配置哨兵集群(详见老师笔记)

> `sentinel.conf`

> 21行
>
> > 端口3个节点的哨兵集群	`26739 26380 26381`
>
> 69行
>
> > `sentinel monitor mymaster 127.0.0.1 6379 2`默认值
> >
> > > `setinel monitor key`值 哨兵的监听信息
> > >
> > > `mymaster`	主从结构的代号,可以自定义
>
> 。。。。



### jedis哨兵代码

> 略



### 哨兵集群的问题

> 主从节点替换后，hash一致性的计算结果就会出现变化，导致某些key映射不到正确的节点中

